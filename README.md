### README.md

# Реферальная система API

Этот проект представляет собой простую реферальную систему, реализованную с использованием Django и Django REST Framework. Система позволяет пользователям регистрироваться по номеру телефона, получать уникальный реферальный код и приглашать других, используя их коды. Основные функции:

- Аутентификация по номеру телефона.
- Генерация уникального реферального кода при первой авторизации.
- Возможность привязать реферальный код другого пользователя.
- Список приглашённых пользователей (тех, кто использовал ваш реферальный код).
- REST API для взаимодействия с функционалом.

---

## Установка

### 1. Клонирование репозитория

```bash
git clone https://github.com/ваш-репозиторий/referral_system.git
cd referral_system
```

### 2. Создание виртуального окружения

```bash
python3 -m venv venv
source venv/bin/activate  # Для Linux/Mac
venv\Scripts\activate     # Для Windows
```

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 4. Применение миграций

```bash
python manage.py migrate
```

### 5. Запуск сервера

```bash
python manage.py runserver
```

---

## API

### Основные эндпоинты:

#### 1. Отправка кода авторизации
**POST** `/api/accounts/send-auth-code/`  
Отправляет 4-значный код авторизации на указанный номер телефона.

Пример запроса:
```json
{
    "phone_number": "1234567890"
}
```

Пример ответа:
```json
{
    "message": "Код отправлен."
}
```

#### 2. Проверка кода авторизации
**POST** `/api/accounts/verify-auth-code/`  
Проверяет 4-значный код авторизации и создает пользователя, если он новый.

Пример запроса:
```json
{
    "phone_number": "1234567890",
    "code": "1234"
}
```

Пример ответа:
```json
{
    "message": "Авторизация успешна."
}
```

#### 3. Профиль пользователя
**GET** `/api/accounts/profile/`  
Возвращает информацию о профиле текущего пользователя.

Пример ответа:
```json
{
    "phone_number": "1234567890",
    "invite_code": "ABC123",
    "activated_code": "XYZ789",
    "invited_users": ["9876543210", "6543210987"]
}
```

#### 4. Привязка реферального кода
**POST** `/api/accounts/activate-invite-code/`  
Позволяет активировать реферальный код другого пользователя.

Пример запроса:
```json
{
    "invite_code": "XYZ789"
}
```

Пример ответа:
```json
{
    "message": "Реферальный код активирован."
}
```

---

## Документация API
Документация доступна по адресам:

- Swagger UI: `/swagger/`
- Redoc: `/redoc/`

---

## Деплой

### На PythonAnywhere
1. Перейдите в консоль PythonAnywhere и создайте новое приложение.
2. Загрузите файлы проекта с локального компьютера или клонируйте репозиторий с GitHub.
3. Убедитесь, что виртуальное окружение настроено корректно и зависимости установлены.
4. В файле `settings.py` добавьте домен PythonAnywhere в `ALLOWED_HOSTS`.
5. Перезагрузите приложение.

---
